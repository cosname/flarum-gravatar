{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@cosname/gravatar/webpack/bootstrap","webpack://@cosname/gravatar/webpack/runtime/compat get default export","webpack://@cosname/gravatar/webpack/runtime/define property getters","webpack://@cosname/gravatar/webpack/runtime/hasOwnProperty shorthand","webpack://@cosname/gravatar/webpack/runtime/make namespace object","webpack://@cosname/gravatar/external root \"flarum.core.compat['models/User']\"","webpack://@cosname/gravatar/./src/forum/helpers/md5.js","webpack://@cosname/gravatar/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['models/User'];","/*\r\n * JavaScript MD5\r\n * https://github.com/blueimp/JavaScript-MD5\r\n *\r\n * Copyright 2011, Sebastian Tschan\r\n * https://blueimp.net\r\n *\r\n * Licensed under the MIT license:\r\n * https://opensource.org/licenses/MIT\r\n *\r\n * Based on\r\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\r\n * Digest Algorithm, as defined in RFC 1321.\r\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\r\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\r\n * Distributed under the BSD License\r\n * See http://pajhome.org.uk/crypt/md5 for more info.\r\n */\r\n\r\n  /*\r\n  * Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n  * to work around bugs in some JS interpreters.\r\n  */\r\n  function safeAdd (x, y) {\r\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF)\r\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\r\n    return (msw << 16) | (lsw & 0xFFFF)\r\n  }\r\n\r\n  /*\r\n  * Bitwise rotate a 32-bit number to the left.\r\n  */\r\n  function bitRotateLeft (num, cnt) {\r\n    return (num << cnt) | (num >>> (32 - cnt))\r\n  }\r\n\r\n  /*\r\n  * These functions implement the four basic operations the algorithm uses.\r\n  */\r\n  function md5cmn (q, a, b, x, s, t) {\r\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\r\n  }\r\n  function md5ff (a, b, c, d, x, s, t) {\r\n    return md5cmn((b & c) | ((~b) & d), a, b, x, s, t)\r\n  }\r\n  function md5gg (a, b, c, d, x, s, t) {\r\n    return md5cmn((b & d) | (c & (~d)), a, b, x, s, t)\r\n  }\r\n  function md5hh (a, b, c, d, x, s, t) {\r\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\r\n  }\r\n  function md5ii (a, b, c, d, x, s, t) {\r\n    return md5cmn(c ^ (b | (~d)), a, b, x, s, t)\r\n  }\r\n\r\n  /*\r\n  * Calculate the MD5 of an array of little-endian words, and a bit length.\r\n  */\r\n  function binlMD5 (x, len) {\r\n    /* append padding */\r\n    x[len >> 5] |= 0x80 << (len % 32)\r\n    x[(((len + 64) >>> 9) << 4) + 14] = len\r\n\r\n    var i\r\n    var olda\r\n    var oldb\r\n    var oldc\r\n    var oldd\r\n    var a = 1732584193\r\n    var b = -271733879\r\n    var c = -1732584194\r\n    var d = 271733878\r\n\r\n    for (i = 0; i < x.length; i += 16) {\r\n      olda = a\r\n      oldb = b\r\n      oldc = c\r\n      oldd = d\r\n\r\n      a = md5ff(a, b, c, d, x[i], 7, -680876936)\r\n      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\r\n      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\r\n      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\r\n      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\r\n      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\r\n      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\r\n      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\r\n      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\r\n      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\r\n      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\r\n      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\r\n      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\r\n      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\r\n      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\r\n      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\r\n\r\n      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\r\n      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\r\n      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\r\n      b = md5gg(b, c, d, a, x[i], 20, -373897302)\r\n      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\r\n      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\r\n      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\r\n      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\r\n      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\r\n      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\r\n      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\r\n      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\r\n      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\r\n      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\r\n      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\r\n      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\r\n\r\n      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\r\n      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\r\n      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\r\n      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\r\n      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\r\n      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\r\n      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\r\n      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\r\n      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\r\n      d = md5hh(d, a, b, c, x[i], 11, -358537222)\r\n      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\r\n      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\r\n      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\r\n      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\r\n      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\r\n      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\r\n\r\n      a = md5ii(a, b, c, d, x[i], 6, -198630844)\r\n      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\r\n      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\r\n      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\r\n      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\r\n      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\r\n      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\r\n      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\r\n      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\r\n      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\r\n      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\r\n      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\r\n      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\r\n      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\r\n      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\r\n      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\r\n\r\n      a = safeAdd(a, olda)\r\n      b = safeAdd(b, oldb)\r\n      c = safeAdd(c, oldc)\r\n      d = safeAdd(d, oldd)\r\n    }\r\n    return [a, b, c, d]\r\n  }\r\n\r\n  /*\r\n  * Convert an array of little-endian words to a string\r\n  */\r\n  function binl2rstr (input) {\r\n    var i\r\n    var output = ''\r\n    var length32 = input.length * 32\r\n    for (i = 0; i < length32; i += 8) {\r\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF)\r\n    }\r\n    return output\r\n  }\r\n\r\n  /*\r\n  * Convert a raw string to an array of little-endian words\r\n  * Characters >255 have their high-byte silently ignored.\r\n  */\r\n  function rstr2binl (input) {\r\n    var i\r\n    var output = []\r\n    output[(input.length >> 2) - 1] = undefined\r\n    for (i = 0; i < output.length; i += 1) {\r\n      output[i] = 0\r\n    }\r\n    var length8 = input.length * 8\r\n    for (i = 0; i < length8; i += 8) {\r\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32)\r\n    }\r\n    return output\r\n  }\r\n\r\n  /*\r\n  * Calculate the MD5 of a raw string\r\n  */\r\n  function rstrMD5 (s) {\r\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\r\n  }\r\n\r\n  /*\r\n  * Calculate the HMAC-MD5, of a key and some data (raw strings)\r\n  */\r\n  function rstrHMACMD5 (key, data) {\r\n    var i\r\n    var bkey = rstr2binl(key)\r\n    var ipad = []\r\n    var opad = []\r\n    var hash\r\n    ipad[15] = opad[15] = undefined\r\n    if (bkey.length > 16) {\r\n      bkey = binlMD5(bkey, key.length * 8)\r\n    }\r\n    for (i = 0; i < 16; i += 1) {\r\n      ipad[i] = bkey[i] ^ 0x36363636\r\n      opad[i] = bkey[i] ^ 0x5C5C5C5C\r\n    }\r\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\r\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\r\n  }\r\n\r\n  /*\r\n  * Convert a raw string to a hex string\r\n  */\r\n  function rstr2hex (input) {\r\n    var hexTab = '0123456789abcdef'\r\n    var output = ''\r\n    var x\r\n    var i\r\n    for (i = 0; i < input.length; i += 1) {\r\n      x = input.charCodeAt(i)\r\n      output += hexTab.charAt((x >>> 4) & 0x0F) +\r\n      hexTab.charAt(x & 0x0F)\r\n    }\r\n    return output\r\n  }\r\n\r\n  /*\r\n  * Encode a string as utf-8\r\n  */\r\n  function str2rstrUTF8 (input) {\r\n    return unescape(encodeURIComponent(input))\r\n  }\r\n\r\n  /*\r\n  * Take string arguments and return either raw or hex encoded strings\r\n  */\r\n  function rawMD5 (s) {\r\n    return rstrMD5(str2rstrUTF8(s))\r\n  }\r\n  function hexMD5 (s) {\r\n    return rstr2hex(rawMD5(s))\r\n  }\r\n  function rawHMACMD5 (k, d) {\r\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\r\n  }\r\n  function hexHMACMD5 (k, d) {\r\n    return rstr2hex(rawHMACMD5(k, d))\r\n  }\r\n\r\nexport default function md5 (string, key, raw) {\r\n  if (!key) {\r\n    if (!raw) {\r\n      return hexMD5(string)\r\n    }\r\n    return rawMD5(string)\r\n  }\r\n  if (!raw) {\r\n    return hexHMACMD5(key, string)\r\n  }\r\n  return rawHMACMD5(key, string)\r\n}\r\n","/*\r\n* Copyright (c) Salva Machí <salvamb@sispixels.com>\r\n* Copyright (c) 2017 Yixuan Qiu\r\n*/\r\n\r\nimport User from 'flarum/models/User';\r\nimport md5 from './helpers/md5';\r\n\r\napp.initializers.add('cosname-gravatar', function() {\r\n\r\n    // Modify the function that returns the avatar URL\r\n    User.prototype.avatarUrl = function() {\r\n        var user = this;\r\n        var avatar_url = user.attribute('avatarUrl');\r\n\r\n        // If avatarURL has not been set\r\n        if (!avatar_url) {\r\n            // User email\r\n            var email = user.attribute('email');\r\n            if (email) {\r\n                // Calculate email hash and obtain the Gravatar link\r\n                // http://en.gravatar.com/site/implement/images/\r\n                var hash = md5(email);\r\n                user.pushAttributes({\r\n                    avatarUrl: 'https://www.gravatar.com/avatar/' + hash + '?d=identicon',\r\n                    avatarColor: null\r\n                });\r\n            }\r\n        }\r\n\r\n        return user.attribute('avatarUrl');\r\n    };\r\n\r\n    // Since the avatarUrl is now linking to Gravatar,\r\n    // we need to avoid cross origin errors\r\n    User.prototype.calculateAvatarColor = function() {\r\n        const image = new Image();\r\n        const user = this;\r\n\r\n        image.onload = function() {\r\n            const colorThief = new ColorThief();\r\n            user.avatarColor = colorThief.getColor(this);\r\n            user.freshness = new Date();\r\n            m.redraw();\r\n        };\r\n        // https://github.com/lokesh/color-thief/issues/20\r\n        image.crossOrigin = 'Anonymous';\r\n        image.src = this.avatarUrl();\r\n    };\r\n\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","safeAdd","x","y","lsw","md5cmn","q","b","s","t","num","cnt","md5ff","c","md5gg","md5hh","md5ii","binlMD5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstr2hex","hexTab","charAt","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","rstrMD5","rawHMACMD5","k","data","hash","bkey","ipad","opad","concat","rstrHMACMD5","app","initializers","add","User","string","raw","user","this","attribute","email","pushAttributes","avatarUrl","avatarColor","image","Image","onload","colorThief","ColorThief","getColor","freshness","Date","m","redraw","crossOrigin","src"],"sourceRoot":""}